<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fake News & Misinformation Detector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h1 class="text-center">üì∞ Fake News & Misinformation Detector</h1>
    <p class="text-center text-muted">Paste a news article link to verify credibility</p>
    
    <div class="input-group mb-3">
      <input type="text" id="articleUrl" class="form-control" placeholder="Paste article URL here">
      <button class="btn btn-primary" onclick="checkArticle()">Check</button>
    </div>
    
    <div id="result" class="mt-4"></div>
  </div>

<script>
async function checkArticle() {
  const url = document.getElementById("articleUrl").value;
  document.getElementById("result").innerHTML = "<div class='text-center'>Checking... ‚è≥</div>";

  const response = await fetch("/checkArticle", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ url })
  });

  const data = await response.json();

  const verdictColor =
    data.status.includes("Credible") ? "success" :
    data.status.includes("Low") ? "warning" : "danger";

  let altArticlesHTML = "";
  if (data.alternates && data.alternates.length > 0) {
    altArticlesHTML = "<hr/><h6>üîé References from other websites:</h6><div class='row'>";
    
    data.alternates.forEach(a => {
      const date = a.date ? new Date(a.date).toLocaleDateString() : "Unknown date";
      const img = a.image ? `<img src="${a.image}" class="img-fluid rounded mb-2" style="max-height:120px;">` : "";
      
      altArticlesHTML += `
        <div class="col-md-4 mb-3">
          <div class="card h-100 shadow-sm">
            ${img}
            <div class="card-body">
              <small class="text-muted">${a.source} ‚Ä¢ ${date}</small>
              <p class="mt-2"><a href="${a.url}" target="_blank" rel="noopener noreferrer">${a.title}</a></p>
            </div>
          </div>
        </div>
      `;
    });

    altArticlesHTML += "</div>";
  }

  document.getElementById("result").innerHTML = `
    <div class="card border-${verdictColor}">
      <div class="card-body">
        <h5 class="card-title">
          Credibility Check: <span class="badge bg-${verdictColor}">${data.status}</span>
        </h5>
        <p class="card-text">${data.message}</p>

        <div class="progress mt-3" style="height:25px;">
          <div class="progress-bar bg-${verdictColor}" 
               role="progressbar" style="width:${data.score}%;">
            Credibility Score: ${data.score}%
          </div>
        </div>
        ${altArticlesHTML}
      </div>
    </div>`;
}
</script>
</body>
</html>